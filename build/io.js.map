{"version":3,"sources":["../src/io.js"],"names":["App","define","Vector","width","height","mouse","keyHandlers","keyStates","bindEvents","name","handeler","reverseHandler","downHandler","upHandler","window","addEventListener","key","x","y","set","changedTouches","pageX","pageY","mouseDown"],"mappings":";;;;;;AAAAA,IAAIC,MAAJ,CAAW;AAAA,QAAGC,MAAH,QAAGA,MAAH;AAAA;AAEP,oBAAYC,KAAZ,EAAmBC,MAAnB,EAA2B;AAAA;;AACvB,iBAAKD,KAAL,GAAaA,KAAb;AACA,iBAAKC,MAAL,GAAcA,MAAd;AACA,iBAAKC,KAAL,GAAa,IAAIH,MAAJ,CAAW,CAAX,EAAc,GAAd,CAAb;;AAEA,iBAAKI,WAAL,GAAmB,EAAnB;AACA,iBAAKC,SAAL,GAAiB,EAAjB;;AAEA,iBAAKC,UAAL;AACH;;AAXM;AAAA;AAAA,2CAaQ;AACX,qBAAK,IAAIC,IAAT,IAAiB,KAAKH,WAAtB,EAAmC;AAC/B,wBAAI,KAAKC,SAAL,CAAeE,IAAf,CAAJ,EAA0B;AACtB,6BAAKH,WAAL,CAAiBG,IAAjB,EAAuBC,QAAvB;AACH,qBAFD,MAEO;AACH,6BAAKJ,WAAL,CAAiBG,IAAjB,EAAuBE,cAAvB,IAAyC,KAAKL,WAAL,CAAiBG,IAAjB,EAAuBE,cAAvB,EAAzC;AACH;AACJ;AACJ;AArBM;AAAA;AAAA,oCAuBCC,WAvBD,EAuBcC,SAvBd,EAuByB;AAC5BC,uBAAOC,gBAAP,CAAwB,WAAxB,EAAqCH,WAArC;AACAE,uBAAOC,gBAAP,CAAwB,SAAxB,EAAmCF,SAAnC;;AAEAC,uBAAOC,gBAAP,CAAwB,YAAxB,EAAsCH,WAAtC;AACAE,uBAAOC,gBAAP,CAAwB,UAAxB,EAAoCF,SAApC;;AAEA,uBAAO,IAAP;AACH;AA/BM;AAAA;AAAA,kCAiCDG,GAjCC,EAiCIN,QAjCJ,EAiCcC,cAjCd,EAiC8B;AACjC,qBAAKL,WAAL,CAAiBU,GAAjB,IAAwB,EAAEN,kBAAF,EAAYC,8BAAZ,EAAxB;AACA,uBAAO,IAAP;AACH;AApCM;AAAA;AAAA,yCAsCM;AAAA;;AACTG,uBAAOC,gBAAP,CAAwB,WAAxB,EAAqC;AAAA,wBAAGE,CAAH,SAAGA,CAAH;AAAA,wBAAMC,CAAN,SAAMA,CAAN;AAAA,2BACjC,MAAKb,KAAL,CAAWc,GAAX,CAAeF,IAAI,MAAKd,KAAL,GAAa,CAAhC,EAAmC,CAACe,CAAD,GAAK,MAAKd,MAAL,GAAc,CAAtD,CADiC;AAAA,iBAArC;AAEAU,uBAAOC,gBAAP,CAAwB,WAAxB,EAAqC,iBAAwB;AAAA,wBAArBK,cAAqB,SAArBA,cAAqB;;AACzD,0BAAKf,KAAL,CAAWc,GAAX,CAAeC,eAAe,CAAf,EAAkBC,KAAlB,GAA0B,MAAKlB,KAAL,GAAa,CAAtD,EACe,CAACiB,eAAe,CAAf,EAAkBE,KAAnB,GAA2B,MAAKlB,MAAL,GAAc,CADxD;AAEH,iBAHD;;AAKAU,uBAAOC,gBAAP,CAAwB,WAAxB,EAAqC;AAAA,wBAAGE,CAAH,SAAGA,CAAH;AAAA,wBAAMC,CAAN,SAAMA,CAAN;AAAA,2BAAc,MAAKK,SAAL,GAAiB,IAA/B;AAAA,iBAArC;AACAT,uBAAOC,gBAAP,CAAwB,SAAxB,EAAmC;AAAA,wBAAGE,CAAH,SAAGA,CAAH;AAAA,wBAAMC,CAAN,SAAMA,CAAN;AAAA,2BAAc,MAAKK,SAAL,GAAiB,KAA/B;AAAA,iBAAnC;;AAEAT,uBAAOC,gBAAP,CAAwB,SAAxB,EAAmC;AAAA,wBAAGC,GAAH,SAAGA,GAAH;AAAA,2BAAa,MAAKT,SAAL,CAAeS,GAAf,IAAsB,IAAnC;AAAA,iBAAnC;AACAF,uBAAOC,gBAAP,CAAwB,OAAxB,EAAiC;AAAA,wBAAGC,GAAH,SAAGA,GAAH;AAAA,2BAAa,MAAKT,SAAL,CAAeS,GAAf,IAAsB,KAAnC;AAAA,iBAAjC;AACH;AAnDM;;AAAA;AAAA;AAAA,CAAX","file":"io.js","sourcesContent":["App.define(({ Vector }) => class IO {\r\n\r\n    constructor(width, height) {\r\n        this.width = width;\r\n        this.height = height;\r\n        this.mouse = new Vector(0, 300);\r\n\r\n        this.keyHandlers = {};\r\n        this.keyStates = {};\r\n\r\n        this.bindEvents();\r\n    }\r\n\r\n    callHandlers() {\r\n        for (let name in this.keyHandlers) {\r\n            if (this.keyStates[name]) {\r\n                this.keyHandlers[name].handeler();\r\n            } else {\r\n                this.keyHandlers[name].reverseHandler && this.keyHandlers[name].reverseHandler();\r\n            }\r\n        }\r\n    }\r\n\r\n    onMouse(downHandler, upHandler) {\r\n        window.addEventListener('mousedown', downHandler);\r\n        window.addEventListener('mouseup', upHandler);\r\n\r\n        window.addEventListener('touchstart', downHandler);\r\n        window.addEventListener('touchend', upHandler);\r\n\r\n        return this;\r\n    }\r\n\r\n    onKey(key, handeler, reverseHandler) {\r\n        this.keyHandlers[key] = { handeler, reverseHandler };\r\n        return this;\r\n    }\r\n\r\n    bindEvents() {\r\n        window.addEventListener('mousemove', ({ x, y }) =>\r\n            this.mouse.set(x - this.width / 2, -y + this.height / 2));\r\n        window.addEventListener('touchmove', ({ changedTouches }) => {\r\n            this.mouse.set(changedTouches[0].pageX - this.width / 2,\r\n                           -changedTouches[0].pageY + this.height / 2)\r\n        });\r\n\r\n        window.addEventListener('mousedown', ({ x, y }) => this.mouseDown = true);\r\n        window.addEventListener('mouseup', ({ x, y }) => this.mouseDown = false);\r\n\r\n        window.addEventListener('keydown', ({ key }) => this.keyStates[key] = true);\r\n        window.addEventListener('keyup', ({ key }) => this.keyStates[key] = false);\r\n    }\r\n\r\n});\r\n"]}