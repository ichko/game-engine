{"version":3,"sources":["../src/main.js"],"names":["window","onresize","animationFrame","undefined","canvas","document","getElementById","width","innerWidth","height","innerHeight","ctx","getContext","translate","scale","App","load","get","Utils","IO","Vector","CanvasRenderer","Scene","Engine","SpringyVector","Parallax","Circle","Player","AsteroidField","Environment","io","renderer","scene","engine","colors","player","camera","position","elasticity","damping","target","copy","add","velocity","parallax","enviroment","name","container","addLayer","depth","objects","elements","Math","max","onMouse","speed","time","cancelAnimationFrame","animation","clear","render","update","callHandlers","outOfBounds","zoom","length","requestAnimationFrame"],"mappings":"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","file":"main.js","sourcesContent":["window.onresize = () => {\r\n    // init();\r\n};\r\n\r\nlet animationFrame = undefined;\r\n// function init() {\r\n\r\n    let [ ctx, width, height ] = (() => {\r\n        let canvas = document.getElementById('canvas');\r\n        canvas.width = innerWidth;\r\n        canvas.height = innerHeight;\r\n        let ctx = canvas.getContext('2d');\r\n        ctx.translate(innerWidth / 2, innerHeight / 2);\r\n        ctx.scale(1, -1);\r\n\r\n        return [ ctx, innerWidth, innerHeight ];\r\n    })();\r\n\r\n    let {\r\n        Utils, IO, Vector,\r\n        CanvasRenderer, Scene, Engine,\r\n        SpringyVector, Parallax, Circle,\r\n\r\n        Player, AsteroidField, Environment\r\n    } = App.load().get();\r\n\r\n\r\n    let io = new IO(width, height);\r\n    let renderer = new CanvasRenderer(ctx, width, height);\r\n    let scene = new Scene();\r\n    let engine = new Engine(renderer, scene);\r\n\r\n\r\n    let colors = ['#6f6', '#f66', '#66f', '#ff3', '#3ff', '#f3f'];\r\n    let player = new Player(colors);\r\n\r\n    let camera = new SpringyVector({\r\n        position: new Vector(0, height / 2 - 150),\r\n        elasticity: 0.08,\r\n        damping: 0.3,\r\n        target: () => player.position.copy().add(player.velocity.copy().scale(3))\r\n    });\r\n\r\n    let parallax = new Parallax(camera.position);\r\n\r\n    let enviroment = new Environment(camera, width, height);\r\n    for (let name in enviroment.container) {\r\n        parallax.addLayer({\r\n            depth: enviroment.container[name].depth,\r\n            objects: enviroment.container[name].elements\r\n        });\r\n    }\r\n\r\n    parallax.addLayer({ objects: [player, new AsteroidField(player, colors, 10, Math.max(width, height))] });\r\n\r\n    scene.add(parallax).add(camera);\r\n\r\n    io.onMouse(() => player.speed = 5, () => player.speed = 0);\r\n\r\n    let time = 0;\r\n    cancelAnimationFrame(animationFrame);\r\n    (function animation() {\r\n        time++;\r\n        engine.clear().render().update();\r\n        io.callHandlers();\r\n        enviroment.outOfBounds();\r\n\r\n        parallax.zoom = 50 / (player.velocity.length() + 30);\r\n\r\n        animationFrame = requestAnimationFrame(animation);\r\n    })();\r\n\r\n// }\r\n// init();"]}