{"version":3,"sources":["../../src/engine/instance-pool.js"],"names":["App","define","type","released","Set","alocated","config","size","instance","values","next","value","set","delete","add","has"],"mappings":";;;;;;AAAAA,IAAIC,MAAJ,CAAW;AAAA;AAEP,8BAAYC,IAAZ,EAAkB;AAAA;;AACd,iBAAKA,IAAL,GAAYA,IAAZ;AACA,iBAAKC,QAAL,GAAgB,IAAIC,GAAJ,EAAhB;AACA,iBAAKC,QAAL,GAAgB,IAAID,GAAJ,EAAhB;AACH;;AANM;AAAA;AAAA,mCAQQ;AAAA,kDAARE,MAAQ;AAARA,0BAAQ;AAAA;;AACX,oBAAI,KAAKH,QAAL,CAAcI,IAAd,GAAqB,CAAzB,EAA4B;AACxB,wBAAIC,YAAW,KAAKL,QAAL,CAAcM,MAAd,GAAuBC,IAAvB,GAA8BC,KAA7C;AACAH,8BAASI,GAAT,kBAAgBN,MAAhB;AACA,yBAAKH,QAAL,CAAcU,MAAd,CAAqBL,SAArB;AACA,yBAAKH,QAAL,CAAcS,GAAd,CAAkBN,SAAlB;;AAEA,2BAAOA,SAAP;AACH;;AAED,oBAAIA,8CAAe,KAAKN,IAApB,gBAA4BI,MAA5B,KAAJ;AACA,qBAAKD,QAAL,CAAcS,GAAd,CAAkBN,QAAlB;AACA,uBAAOA,QAAP;AACH;AArBM;AAAA;AAAA,oCAuBCA,QAvBD,EAuBW;AACd,oBAAI,KAAKH,QAAL,CAAcU,GAAd,CAAkBP,QAAlB,CAAJ,EAAiC;AAC7B,yBAAKH,QAAL,CAAcQ,MAAd,CAAqBL,QAArB;AACA,yBAAKL,QAAL,CAAcW,GAAd,CAAkBN,QAAlB;AACH;AACJ;AA5BM;;AAAA;AAAA;AAAA,CAAX","file":"instance-pool.js","sourcesContent":["App.define(() => class  InstancePool {\r\n\r\n    constructor(type) {\r\n        this.type = type;\r\n        this.released = new Set();\r\n        this.alocated = new Set();\r\n    }\r\n\r\n    new(...config) {\r\n        if (this.released.size > 0) {\r\n            let instance = this.released.values().next().value;\r\n            instance.set(...config);\r\n            this.released.delete(instance);\r\n            this.alocated.add(instance);\r\n\r\n            return instance;\r\n        }\r\n\r\n        let instance = new this.type(...config);\r\n        this.alocated.add(instance);\r\n        return instance;\r\n    }\r\n\r\n    release(instance) {\r\n        if (this.alocated.has(instance)) {\r\n            this.alocated.delete(instance);\r\n            this.released.add(instance);\r\n        }\r\n    }\r\n\r\n});\r\n"]}