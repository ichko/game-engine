{"version":3,"sources":["../src/environment.js"],"names":["App","define","Utils","Circle","camera","width","height","container","frontBig","elements","circleGenerator","style","color","size","depth","frontSmall","backBig","backSmall","count","range","position","Vector","random","radius","name","layer","forEach","cameraPos","copy","scale","x","element","y"],"mappings":"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","file":"environment.js","sourcesContent":["App.define(({ Utils, Circle }) => class Environment {\r\n\r\n    constructor(camera) {\r\n        this.camera = camera;\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        this.container = {\r\n            frontBig: { elements: this.circleGenerator(10, { style: { color: 'rgba(220, 0, 100, 0.6)' }, size: 9 }), depth: 1.1 },\r\n            frontSmall: { elements: this.circleGenerator(10, { style: { color: 'rgba(0, 200, 100, 0.6)' }, size: 7 }), depth: 1.2 },\r\n            backBig: { elements: this.circleGenerator(10, { style: { color: 'rgba(240, 120, 0, 0.6)' }, size: 5 }), depth: 1.4 },\r\n            backSmall: { elements: this.circleGenerator(10, { style: { color: 'rgba(50, 100, 200, 0.6)' }, size: 3 }), depth: 1.8 }\r\n        };\r\n    }\r\n\r\n    circleGenerator(count, { size, style } = {}) {\r\n        return Utils.range(count, () => new Circle({\r\n            position: Vector.random(-width / 2, width / 2, -this.height / 2, this.height / 2),\r\n            radius: Utils.random(1, size),\r\n            style\r\n        }));\r\n    }\r\n\r\n    outOfBounds() {\r\n        for (let name in this.container) {\r\n            let layer = this.container[name];\r\n            layer.elements.forEach(element => {\r\n                let cameraPos = this.camera.position.copy().scale(1 / layer.depth);\r\n\r\n                if (cameraPos.x - element.position.x > this.width / 2) {\r\n                    element.position.x = cameraPos.x + this.width / 2 - (cameraPos.x - element.position.x) % (this.width / 2);\r\n                }\r\n                if (element.position.x - cameraPos.x > this.width / 2) {\r\n                    element.position.x = cameraPos.x - this.width / 2 + (cameraPos.x - element.position.x) % (this.width / 2);\r\n                }\r\n\r\n                if (cameraPos.y - element.position.y > this.height / 2) {\r\n                    element.position.y = cameraPos.y + this.height - (cameraPos.y - element.position.y) % (this.height);\r\n                }\r\n                if (element.position.y - cameraPos.y > this.height / 2) {\r\n                    element.position.y = cameraPos.y + (cameraPos.y - element.position.y) % (this.height);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n});"]}